<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML>

<!-- Mirrored from undocumented.ntinternals.net/UserMode/Undocumented Functions/NT Objects/Process/PEB.html by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 24 Apr 2010 18:24:07 GMT -->
<HEAD>
	<TITLE>PEB</TITLE>
	<LINK HREF="../../../../tomek.css" REL="stylesheet" TYPE="text/css" TITLE="Style">
</HEAD>

<BODY>

<H3 CLASS="Header">Undocumented functions of NTDLL</H3>
<P ALIGN="right" CLASS="CompileDate">2OO1,  2 March</P>
<BR>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-8635618593004815";
/* NTinternals Horizontal, 728x90 */
google_ad_slot = "4640181396";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="../../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>

<BR>
<DIV CLASS="text" >PEB</DIV>
<DIV CLASS="highlight" >PEB</DIV>
<BR>

<PRE CLASS="FnDefinition">
typedef struct _PEB {
<P CLASS="FnDefParams">
  BOOLEAN                 <I><FONT COLOR="blue">InheritedAddressSpace</FONT></I>;
  BOOLEAN                 <I><FONT COLOR="blue">ReadImageFileExecOptions</FONT></I>;
  BOOLEAN                 <I><FONT COLOR="blue">BeingDebugged</FONT></I>;
  BOOLEAN                 <I><FONT COLOR="blue">Spare</FONT></I>;
  HANDLE                  <I><FONT COLOR="blue">Mutant</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">ImageBaseAddress</FONT></I>;
  PPEB_LDR_DATA           <I><FONT COLOR="blue">LoaderData</FONT></I>;
  PRTL_USER_PROCESS_PARAMETERS <I><FONT COLOR="blue">ProcessParameters</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">SubSystemData</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">ProcessHeap</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">FastPebLock</FONT></I>;
  PPEBLOCKROUTINE         <I><FONT COLOR="blue">FastPebLockRoutine</FONT></I>;
  PPEBLOCKROUTINE         <I><FONT COLOR="blue">FastPebUnlockRoutine</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">EnvironmentUpdateCount</FONT></I>;
  PPVOID                  <I><FONT COLOR="blue">KernelCallbackTable</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">EventLogSection</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">EventLog</FONT></I>;
  PPEB_FREE_BLOCK         <I><FONT COLOR="blue">FreeList</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">TlsExpansionCounter</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">TlsBitmap</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">TlsBitmapBits[0x2]</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">ReadOnlySharedMemoryBase</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">ReadOnlySharedMemoryHeap</FONT></I>;
  PPVOID                  <I><FONT COLOR="blue">ReadOnlyStaticServerData</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">AnsiCodePageData</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">OemCodePageData</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">UnicodeCaseTableData</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">NumberOfProcessors</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">NtGlobalFlag</FONT></I>;
  BYTE                    <I><FONT COLOR="blue">Spare2[0x4]</FONT></I>;
  LARGE_INTEGER           <I><FONT COLOR="blue">CriticalSectionTimeout</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">HeapSegmentReserve</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">HeapSegmentCommit</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">HeapDeCommitTotalFreeThreshold</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">HeapDeCommitFreeBlockThreshold</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">NumberOfHeaps</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">MaximumNumberOfHeaps</FONT></I>;
  PPVOID                  <I><FONT COLOR="blue">*ProcessHeaps</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">GdiSharedHandleTable</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">ProcessStarterHelper</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">GdiDCAttributeList</FONT></I>;
  PVOID                   <I><FONT COLOR="blue">LoaderLock</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">OSMajorVersion</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">OSMinorVersion</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">OSBuildNumber</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">OSPlatformId</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">ImageSubSystem</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">ImageSubSystemMajorVersion</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">ImageSubSystemMinorVersion</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">GdiHandleBuffer[0x22]</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">PostProcessInitRoutine</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">TlsExpansionBitmap</FONT></I>;
  BYTE                    <I><FONT COLOR="blue">TlsExpansionBitmapBits[0x80]</FONT></I>;
  ULONG                   <I><FONT COLOR="blue">SessionId</FONT></I>;
</P>
} PEB, *PPEB;
</PRE>

<BR><BR><BR>


Structure <B><U>PEB</B></U> <I>(Process Enviroment Block)</I> contains all <I>User-Mode</I> parameters associated by system with current process.
<BR><BR><HR WIDTH="40%"><BR>

<H6><LI>InheritedAddressSpace</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>ReadImageFileExecOptions</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>BeingDebugged</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>Spare</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>Mutant</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>ImageBaseAddress</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Address of executable image in process' memory.
<H6><LI>LoaderData</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Pointer to <A HREF="../../../Structures/PEB_LDR_DATA.html">PEB_LDR_DATA</A> structure contains information filled by Loader.
<H6><LI>ProcessParameters</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Pointer to <A HREF="../../../Structures/RTL_USER_PROCESS_PARAMETERS.html">RTL_USER_PROCESS_PARAMETERS</A> structure.
<H6><LI>SubSystemData</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>ProcessHeap</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Address of process' first heap allocated by Loader.
<H6><LI>FastPebLock</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Parameter for <B><U>PEBLOCKROUTINE</B></U> (see below).
<H6><LI>FastPebLockRoutine</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Address of fast-locking routine for <B><U>PEB</B></U>. Definition of routine is:<BR>
<DD><B>	typedef void (*</B><B><U>PPEBLOCKROUTINE</B></U><B>)(</B><BR>
<DD>	<DD>	PVOID PebLock<BR>
<DD>	<DD><B>	);
</B>
<H6><LI>FastPebUnlockRoutine</H6>
&nbsp;&nbsp;&nbsp;&nbsp;<B><U>PEB</B></U> fast-unlock routine.
<H6><LI>EnvironmentUpdateCount</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Counter of process environment updates.
<H6><LI>KernelCallbackTable</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>EventLogSection</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>EventLog</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>FreeList</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>TlsExpansionCounter</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>TlsBitmap</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>TlsBitmapBits[0x2]</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>ReadOnlySharedMemoryBase</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>ReadOnlySharedMemoryHeap</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>ReadOnlyStaticServerData</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>AnsiCodePageData</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>OemCodePageData</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>UnicodeCaseTableData</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>NumberOfProcessors</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>NtGlobalFlag</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>Spare2[0x4]</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>CriticalSectionTimeout</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>HeapSegmentReserve</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>HeapSegmentCommit</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>HeapDeCommitTotalFreeThreshold</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>HeapDeCommitFreeBlockThreshold</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>NumberOfHeaps</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>MaximumNumberOfHeaps</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>*ProcessHeaps</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>GdiSharedHandleTable</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>ProcessStarterHelper</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>GdiDCAttributeList</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>LoaderLock</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>OSMajorVersion</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>OSMinorVersion</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>OSBuildNumber</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>OSPlatformId</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>ImageSubSystem</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>ImageSubSystemMajorVersion</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>ImageSubSystemMinorVersion</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>GdiHandleBuffer[0x22]</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>PostProcessInitRoutine</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>TlsExpansionBitmap</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>TlsExpansionBitmapBits[0x80]</H6>
&nbsp;&nbsp;&nbsp;&nbsp;
<H6><LI>SessionId</H6>
&nbsp;&nbsp;&nbsp;&nbsp;


<BR><BR><BR>
<DT CLASS="Require">Documented by:</DT>
<DD><STRONG>Reactos</STRONG></DD>
<DD><STRONG>Tomasz Nowak</STRONG></DD>


<BR><BR><BR>
<DIV CLASS="Require">Requirements:</DIV>
<DD>Library: <STRONG CLASS="req">ntdll.lib</STRONG>


<BR><BR><BR>
<DIV CLASS="Require">See also:</DIV>
<DD><A HREF="NtQueryInformationProcess.html">NtQueryInformationProcess</A><BR>
<DD><A HREF="PEB_FREE_BLOCK.html">PEB_FREE_BLOCK</A><BR>
<DD><A HREF="../../../Structures/PEB_LDR_DATA.html">PEB_LDR_DATA</A><BR>
<DD><A HREF="PROCESS_BASIC_INFORMATION.html">PROCESS_BASIC_INFORMATION</A><BR>
<DD><A HREF="../../../Structures/RTL_USER_PROCESS_PARAMETERS.html">RTL_USER_PROCESS_PARAMETERS</A><BR>
<DD><A HREF="TEB.html">TEB</A><BR>



<HR WIDTH="0" SIZE="0" NOSHADE CLASS="page">

</BODY>

<!-- Mirrored from undocumented.ntinternals.net/UserMode/Undocumented Functions/NT Objects/Process/PEB.html by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 24 Apr 2010 18:24:08 GMT -->
</HTML>

