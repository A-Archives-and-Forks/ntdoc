<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML>

<!-- Mirrored from undocumented.ntinternals.net/UserMode/Undocumented Functions/Security/NtAccessCheck.html by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 24 Apr 2010 18:23:35 GMT -->
<HEAD>
	<TITLE>NtAccessCheck</TITLE>
	<LINK HREF="../../../tomek.css" REL="stylesheet" TYPE="text/css" TITLE="Style">
</HEAD>

<BODY>

<H3 CLASS="Header">Undocumented functions of NTDLL</H3>
<P ALIGN="right" CLASS="CompileDate">2OO1,  5 March</P>
<BR>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-8635618593004815";
/* NTinternals Horizontal, 728x90 */
google_ad_slot = "4640181396";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>

<BR>
<DIV CLASS="text" >NtAccessCheck</DIV>
<DIV CLASS="highlight" >NtAccessCheck</DIV>
<BR>

<PRE CLASS="FnDefinition">
NTSYSAPI 
NTSTATUS
NTAPI
<P CLASS="FnDefName">NtAccessCheck(
<P CLASS="FnDefParams">
  IN PSECURITY_DESCRIPTOR <I><FONT COLOR="blue">SecurityDescriptor</FONT></I>,
  IN HANDLE               <I><FONT COLOR="blue">ClientToken</FONT></I>,
  IN ACCESS_MASK          <I><FONT COLOR="blue">DesiredAccess</FONT></I>,
  IN PGENERIC_MAPPING     <I><FONT COLOR="blue">GenericMapping</FONT></I> OPTIONAL,
  OUT PPRIVILEGE_SET      <I><FONT COLOR="blue">RequiredPrivilegesBuffer</FONT></I>,
  IN OUT PULONG           <I><FONT COLOR="blue">BufferLength</FONT></I>,
  OUT PACCESS_MASK        <I><FONT COLOR="blue">GrantedAccess</FONT></I>,
  OUT PNTSTATUS           <I><FONT COLOR="blue">AccessStatus</FONT></I> );

</PRE>

<BR><BR><BR>


Function <B><U>NtAccessCheck</B></U> should be used by server applications working in <B>SYSTEM</B> context for check access to object for connected client's token. See similar <I>Win32 API</I> <U>AccessCheck</U> in <I>Microsoft SDK</I>.<BR><BR><HR WIDTH="40%"><BR><H6><LI>SecurityDescriptor</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Pointer to <A HREF="SECURITY_DESCRIPTOR.html">SECURITY_DESCRIPTOR</A> structure.<H6><LI>ClientToken</H6>
&nbsp;&nbsp;&nbsp;&nbsp;<B>HANDLE</B> to client's Token Object opened with <B>TOKEN_QUERY</B> access.<H6><LI>DesiredAccess</H6>
&nbsp;&nbsp;&nbsp;&nbsp;<B>ACCESS_MASK</B> required by client.<H6><LI>GenericMapping</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Pointer to <B>GENERIC_MAPPING</B> structure. Caller can take it in a call to <A HREF="../NT%20Objects/Type%20independed/NtQueryObject.html">NtQueryObject</A>.<H6><LI>RequiredPrivilegesBuffer</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Function fills this buffer with structure <A HREF="PRIVILEGE_SET.html">PRIVILEGE_SET</A> contains required privileges.<H6><LI>BufferLength</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Pointer to <B>ULONG</B> value. On input this value means size of <FONT CLASS="ParamNameDesc">RequiredPrivilegesBuffer</FONT> buffer. If buffer was to small, required buffer size is avaiable on output.<H6><LI>GrantedAccess</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Pointer to <B>ACCESS_MASK</B> value receiving granted access for object.<H6><LI>AccessStatus</H6>
&nbsp;&nbsp;&nbsp;&nbsp;Result of access check, in typical <B>NTSTATUS</B> format.


<BR><BR><BR>
<DT CLASS="Require">Documented by:</DT>
<DD><STRONG>Tomasz Nowak</STRONG></DD>


<BR><BR><BR>
<DIV CLASS="Require">Requirements:</DIV>
<DD>Library: <STRONG CLASS="req">ntdll.lib</STRONG>


<BR><BR><BR>
<DIV CLASS="Require">See also:</DIV>
<DD><A HREF="../NT%20Objects/Port/NtImpersonateClientOfPort.html">NtImpersonateClientOfPort</A><BR>
<DD><A HREF="../NT%20Objects/Thread/NtImpersonateThread.html">NtImpersonateThread</A><BR>
<DD><A HREF="../NT%20Objects/Token/NtOpenProcessToken.html">NtOpenProcessToken</A><BR>
<DD><A HREF="../NT%20Objects/Token/NtOpenThreadToken.html">NtOpenThreadToken</A><BR>
<DD><A HREF="../NT%20Objects/Token/NtPrivilegeCheck.html">NtPrivilegeCheck</A><BR>
<DD><A HREF="../NT%20Objects/Type%20independed/NtQueryObject.html">NtQueryObject</A><BR>
<DD><A HREF="NtQuerySecurityObject.html">NtQuerySecurityObject</A><BR>


<HR WIDTH="0" SIZE="0" NOSHADE CLASS="page">
</BODY>

<!-- Mirrored from undocumented.ntinternals.net/UserMode/Undocumented Functions/Security/NtAccessCheck.html by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 24 Apr 2010 18:23:36 GMT -->
</HTML>

