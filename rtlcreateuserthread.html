<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="RtlCreateUserThread - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>RtlCreateUserThread - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <script src="dark-mode-toggle-preload.js"></script>
    <script>
        document.write(getStylesheetTagsForDarkModeToggle(
            'modules/water-2.1.1-light.css',
            'modules/water-2.1.1-dark.css',
        ));
    </script>
    <noscript>
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            RtlCreateUserThread - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><div class="ntdoc-code-header">#ifndef _NTRTL_H

</div><div class="ntdoc-code-intro"></div><div class="ntdoc-code-body">NTSYSAPI
<a href="ntstatus">NTSTATUS</a>
NTAPI
RtlCreateUserThread(
    _In_ HANDLE ProcessHandle,
    _In_opt_ PSECURITY_DESCRIPTOR ThreadSecurityDescriptor,
    _In_ BOOLEAN CreateSuspended,
    _In_opt_ ULONG ZeroBits,
    _In_opt_ SIZE_T MaximumStackSize,
    _In_opt_ SIZE_T CommittedStackSize,
    _In_ <a href="puser_thread_start_routine">PUSER_THREAD_START_ROUTINE</a> StartAddress,
    _In_opt_ PVOID Parameter,
    _Out_opt_ PHANDLE ThreadHandle,
    _Out_opt_ <a href="client_id">PCLIENT_ID</a> ClientId
    );
</div><div class="ntdoc-code-footer">
#endif
</div></code></pre><div class="ntdoc-code-links"><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/f133e1e169bdaf53262fc98a3aab4636dda8d900/phnt/include/ntrtl.h#L2972">View code on GitHub</a></div></div>
</div>
<div class="ntdoc-description">
<p>Creates a new thread in the specified process.</p>

<h1 id="parameters">Parameters</h1>

<ul>
<li><code>ProcessHandle</code> - a handle to the process where the thread should be created. This can either be the <code><a href="ntcurrentprocess">NtCurrentProcess</a></code> pseudo-handle or a handle with <code><a href="process_create_thread">PROCESS_CREATE_THREAD</a></code> access.</li>
<li><code>ThreadSecurityDescriptor</code> - a security descriptor to protect the new thread with.</li>
<li><code>CreateSuspended</code> - whether the new thread should be created in a suspended state or allowed to run immediately. When specifying <code>TRUE</code>, you can use <code><a href="ntresumethread">NtResumeThread</a></code> to resume the thread later.</li>
<li><code>ZeroBits</code> - the number of high-order address bits that must be zero in the base address of the thread's stack. Note that when the value is larger than 32, it becomes a bit mask.</li>
<li><code>MaximumStackSize</code> - the maximum size of the stack, in bytes. The system rounds this value up to the nearest page. If this parameter is zero, the new thread uses the default size for the executable.</li>
<li><code>CommittedStackSize</code> - the initial size of the stack, in bytes. The system rounds this value up to the nearest page. If this parameter is zero, the new thread uses the default size for the executable.</li>
<li><code>StartAddress</code> - the function to execute on the new thread.</li>
<li><code>Parameter</code> - a user-provided argument to pass to the thread start routine.</li>
<li><code>ThreadHandle</code> - an optional pointer to a variable that receives a handle to the new thread.</li>
<li><code>ClientId</code> - an optional pointer to a variable that receives the client ID of the new thread.</li>
</ul>

<h1 id="remarks">Remarks</h1>

<p>To avoid retaining unused resources, call <code><a href="ntclose">NtClose</a></code> to close the returned handle when it is no longer required.</p>

<h1 id="implementation-details">Implementation details</h1>

<p>This function is a wrapper over <code><a href="ntcreatethreadex">NtCreateThreadEx</a></code>.</p>

<h1 id="related-win32-api">Related Win32 API</h1>

<ul>
<li><a href="https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethreadex"><code>CreateRemoteThreadEx</code></a></li>
</ul>

<h1 id="see-also">See also</h1>

<ul>
<li><code><a href="ntcreatethreadex">NtCreateThreadEx</a></code></li>
<li><code><a href="ntcreatethread">NtCreateThread</a></code></li>
<li><code><a href="ntresumethread">NtResumeThread</a></code></li>
<li><code><a href="ntopenthread">NtOpenThread</a></code></li>
<li><code><a href="ntopenprocess">NtOpenProcess</a></code></li>
<li><code><a href="rtlcreateuserprocess">RtlCreateUserProcess</a></code></li>
</ul>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/rtlcreateuserthread.md">Edit description on GitHub</a>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
